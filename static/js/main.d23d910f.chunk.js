(this["webpackJsonpreact-checkers"]=this["webpackJsonpreact-checkers"]||[]).push([[0],{16:function(e,t,r){},20:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(8),i=r.n(s),l=(r(16),r(2)),c=r(3),u=r(5),o=r(4);function h(e){return 1===Math.abs(e%2)}function v(e,t){return e[t.charAt(0)]}function p(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t===e[r])return r;return!1}function m(e){return parseInt(e.charAt(1),10)}function f(e){return!0===e?"player1":"player2"}var y=r(0);function d(e){var t=e.squareClasses,r=e.onClick;return Object(y.jsx)("button",{className:"square "+t,onClick:r})}var b=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"renderSquare",value:function(e,t){var r=this;return Object(y.jsx)(d,{squareClasses:t,onClick:function(){return r.props.onClick(e)}},e)}},{key:"render",value:function(){var e=[],t=[],r=this.props.moves;for(var a in this.props.boardState)if(this.props.boardState.hasOwnProperty(a)){var n=v(this.props.columns,a),s=m(a),i=f(this.props.currentPlayer),l=h(n)&&h(s)||!h(n)&&!h(s)?"white":"black",c=[];if(c.push(a),c.push(l),this.props.activePiece===a&&c.push("isActive"),r.indexOf(a)>-1){var u="movable "+i+"-move";c.push(u)}null!==this.props.boardState[a]&&(c.push(this.props.boardState[a].player+" piece"),!0===this.props.boardState[a].isKing&&c.push("king")),c=c.join(" "),t.push(this.renderSquare(a,c,this.props.boardState[a])),t.length>=8&&(t=t.reverse(),e.push(Object(y.jsx)("div",{className:"board-col",children:t},e.length)),t=[])}return e}}]),r}(n.a.Component),j=function(){function e(t){Object(l.a)(this,e),this.columns=t}return Object(c.a)(e,[{key:"getCorners",value:function(e){var t=v(this.columns,e),r=m(e),a=t-1>=0&&p(this.columns,t-1),n=t+1<=7&&p(this.columns,t+1),s=r+1<9&&r+1,i=r-1>0&&r-1,l={};return l.leftUpper=!1!==a&&!1!==s?a+s:null,l.rightUpper=!1!==n&&!1!==s?n+s:null,l.leftLower=!1!==a&&!1!==i?a+i:null,l.rightLower=!1!==n&&!1!==i?n+i:null,l}},{key:"getMoves",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===e[t])return[];var n,s=[],i=[],l={},c=this.getCorners(t),u=m(t),o=e[t].player,h="player1"===o?u-1:u+1;for(var v in c)if(c.hasOwnProperty(v)){var p=c[v];if(null!==p&&(r||!(p.indexOf(h)<0)))if(null===e[p])s.push(p);else{var f=e[p];if(f.player===o)continue;var y=this.getCorners(p),d=y[v];null===e[d]&&(l[p]=d,i.push(d))}}n=!1===a?s.concat(i):i;var b=i.length>0?l:null;return[n,b]}},{key:"movePiece",value:function(e,t){var r=Object.assign({},t.history[t.stepNumber]),a=Object.assign({},r.boardState),n=Object.assign({},a[t.activePiece]),s=[];for(var i in t.jumpKills)t.jumpKills.hasOwnProperty(i)&&s.push(t.jumpKills[i]);if(t.moves.indexOf(e)<0&&s.indexOf(e)<0)return null;this.shouldKing(n,e)&&(n.isKing=!0),a[t.activePiece]=null,a[e]=n;var l,c,u=n.player,o=null,h=[],v="player2"===u,p=null;s.indexOf(e)>-1&&(a[(l=t.jumpKills,c=e,Object.keys(l).find((function(e){return l[e]===c})))]=null,(h=this.getMoves(a,e,n.isKing,!0))[0].length>0?(o=!0,v=r.currentPlayer,p=e):o=null);!0===o&&h[0].length>0&&(v=r.currentPlayer,p=e);var m={};return m.boardState=a,m.currentPlayer=v,m.activePiece=p,m.moves=!0===o?h[0]:[],m.jumpKills=!0===o?h[1]:null,m.hasJumped=!0===o?u:null,m.winner=this.evaluateWinner(a),m}},{key:"shouldKing",value:function(e,t){if(!0===e.isKing)return!1;var r=m(t),a=e.player;return 1===r&&"player1"===a||8===r&&"player2"===a}},{key:"evaluateWinner",value:function(e){var t=0,r=0,a=0,n=0;for(var s in e)if(e.hasOwnProperty(s)&&null!==e[s]){var i=this.getMoves(e,s,e[s].isKing,!1)[0].length;"player1"===e[s].player?(++t,r+=i):(++a,n+=i)}return 0===t?"player2pieces":0===a?"player1pieces":0===r?"player2moves":0===n?"player1moves":null}}]),e}(),g=r(23),O=r(11),P=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getComputerMoves",value:function(e,t){var r={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(null!=n&&n.player===t){var s=this.getMoves(e,a,e[a].isKing,!1);(s[0].length>0||null!==s[1])&&(r[a]=s)}}return r}},{key:"getSmartMove",value:function(e,t,r){for(var a=this.getComputerMoves(t,r),n=Object.keys(a),s={},i=0;i<n.length;++i){var l=n[i],c=a[l][0],u=a[l][1],o=[];for(var h in u)u.hasOwnProperty(h)&&o.push(u[h]);for(var v=0,p=null,m=0;m<c.length;++m){var f=c[m],y=0,d=Object.assign({},e);for(d.activePiece=l,d.moves=c,d.jumpKills=u,o.indexOf(f)>-1&&(y+=10);!1===d.currentPlayer;){var b=this.getMoves(d,d.activePiece,d.activePiece.isKing,!0);d.moves=b[0],d.jumpKills=b[1],y+=10}y>=v&&(v=y,p=f)}s[l]=[p,v]}var j=[],g=0;for(var O in s)if(s.hasOwnProperty(O)){var P=s[O][0],k=s[O][1];k>=g&&(k===g&&j.push([O,P]),k>g&&((j=[]).push([O,P]),g=k))}var C=j[Math.floor(Math.random()*j.length)],S={};return S.piece=C[0],S.moveTo=C[1],S}},{key:"getRandomMove",value:function(e,t){var r=this.getComputerMoves(e,t),a=Object.keys(r),n=a[Math.floor(Math.random()*a.length)],s=r[n][0],i=s[Math.floor(Math.random()*s.length)],l={};return l.piece=n,l.moveTo=i,l}}]),r}(j),k=Object(O.a)(),C=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).columns=a.setColumns(),a.ReactCheckers=new j(a.columns),a.Opponent=new P(a.columns),a.state={players:null,history:[{boardState:a.createBoard(),currentPlayer:!0}],activePiece:null,moves:[],jumpKills:null,hasJumped:null,stepNumber:0,winner:null},a}return Object(c.a)(r,[{key:"setColumns",value:function(){var e={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7};return e}},{key:"createBoard",value:function(){var e={};for(var t in this.columns)if(this.columns.hasOwnProperty(t))for(var r=1;r<=8;++r){e[t+r]=null}return e=this.initPlayers(e),console.log(e),e}},{key:"initPlayers",value:function(e){var t=this;return["a8","c8","e8","g8","b7","d7","f7","h7","a6","c6","e6","g6"].forEach((function(r){e[r]=t.createPiece(r,"player1")})),["b3","d3","f3","h3","a2","c2","e2","g2","b1","d1","f1","h1"].forEach((function(r){e[r]=t.createPiece(r,"player2")})),e}},{key:"createPiece",value:function(e,t){var r={};return r.player=t,r.location=e,r.isKing=!1,r}},{key:"getCurrentState",value:function(){var e=this.state.history.slice(0,this.state.stepNumber+1);return e[e.length-1]}},{key:"handleClick",value:function(e){if(null===this.state.winner){var t=this.getCurrentState(),r=t.boardState,a=r[e];if(null===a){if(null!==this.state.activePiece&&this.state.moves.length>0){var n=this.ReactCheckers.movePiece(e,this.state);if(null===n)return;this.updateStatePostMove(n),!1===n.currentPlayer&&null===n.winner&&this.computerTurn()}}else{if(a.player!==f(t.currentPlayer))return;if(this.state.activePiece===e&&null===this.state.hasJumped)return void this.setState({activePiece:null,moves:[],jumpKills:null});if(null!==this.state.hasJumped&&null!==r[e])return;var s=this.ReactCheckers.getMoves(r,e,a.isKing,!1);this.setState({activePiece:e,moves:s[0],jumpKills:s[1]})}}}},{key:"computerTurn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.players>1||setTimeout((function(){var r,a,n,s=e.getCurrentState().boardState;null===t?(a=(r=e.Opponent.getSmartMove(e.state,s,"player2")).piece,n=r.moveTo):(r=e.ReactCheckers.getMoves(s,t,s[t].isKing,!0),a=t,n=r[0][Math.floor(Math.random()*r[0].length)]);var i=s[a],l=e.ReactCheckers.getMoves(s,a,i.isKing,!1);e.setState({activePiece:a,moves:l[0],jumpKills:l[1]}),setTimeout((function(){var t=e.ReactCheckers.movePiece(n,e.state);null!==t&&(e.updateStatePostMove(t),!1===t.currentPlayer&&e.computerTurn(t.activePiece))}),500)}),1e3)}},{key:"updateStatePostMove",value:function(e){this.setState({history:this.state.history.concat([{boardState:e.boardState,currentPlayer:e.currentPlayer}]),activePiece:e.activePiece,moves:e.moves,jumpKills:e.jumpKills,hasJumped:e.hasJumped,stepNumber:this.state.history.length,winner:e.winner})}},{key:"undo",value:function(){var e=parseInt(this.state.stepNumber,10)-1;if(!(e<0)){var t=this.state.history.slice(0,e+1);this.setState({history:t,activePiece:null,moves:[],jumpKills:null,hasJumped:null,stepNumber:e,winner:null})}}},{key:"setPlayers",value:function(e){this.setState({players:e})}},{key:"render",value:function(){var e,t=this,r=this.columns,a=this.state.history,n=this.state.activePiece,s=a[this.state.stepNumber],i=s.boardState,l=s.currentPlayer,c=this.state.moves,u="undo";switch(this.state.stepNumber<1&&(u+=" disabled"),this.state.winner){case"player1pieces":e="A Vacina venceu!!!";break;case"player2pieces":e="COVID venceu... :-(";break;case"player1moves":e="Sem mais possibildiades - A vacina venceu!";break;case"player2moves":e="Sem mais possibildiades - COVID venceu... :-(";break;default:e=!0===s.currentPlayer?"Vacina":"COVID"}return null===this.state.players?Object(y.jsx)(g.a,{history:k,basename:"react-checkers",children:Object(y.jsxs)("div",{className:"players-select",children:[Object(y.jsx)("div",{className:"players",children:Object(y.jsx)("div",{className:"one-player",onClick:function(){return t.setPlayers(1)},children:"Um jogador"})}),Object(y.jsx)("div",{className:"players",children:Object(y.jsx)("div",{className:"two-player",onClick:function(){return t.setPlayers(2)},children:"Dois jogadores"})})]})}):Object(y.jsx)(g.a,{history:k,basename:"react-checkers",children:Object(y.jsxs)("div",{className:"reactCheckers",children:[Object(y.jsx)("div",{className:"game-status",children:e}),Object(y.jsx)("div",{className:"game-board",children:Object(y.jsx)(b,{boardState:i,currentPlayer:l,activePiece:n,moves:c,columns:r,onClick:function(e){return t.handleClick(e)}})}),Object(y.jsx)("div",{className:"time-travel",children:Object(y.jsx)("button",{className:u,onClick:function(){return t.undo()},children:"Undo"})})]})})}}]),r}(n.a.Component);i.a.render(Object(y.jsx)(C,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.d23d910f.chunk.js.map